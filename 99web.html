<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>鸡公煲出品</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Microsoft YaHei", "PingFang SC", sans-serif;
        }

        body {
            width: 100vw;
            height: 100vh;
            /* 初始背景，后续JS随机切换预设色 */
            background: linear-gradient(135deg, #ffccd5, #f7c8e0, #d4b5ff);
            background-size: 400% 400%;
            animation: bgFlow 15s ease infinite;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            transition: background 1.5s ease;
        }

        /* 背景缓慢流动动画 */
        @keyframes bgFlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* 精美输入框按钮组 */
        .input-group {
            position: absolute;
            top: 80px;
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 10;
            width: 60%;
            max-width: 500px;
        }

        #textInput {
            flex: 1;
            height: 55px;
            padding: 0 20px;
            border: none;
            border-radius: 28px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(8px);
            color: #d63384;
            font-size: 18px;
            outline: none;
            box-shadow: 0 4px 15px rgba(214, 51, 132, 0.1);
            transition: all 0.3s ease;
        }

        #textInput::placeholder {
            color: rgba(214, 51, 132, 0.5);
        }

        #textInput:focus {
            background: rgba(255, 255, 255, 0.3);
            box-shadow: 0 0 0 2px rgba(214, 51, 132, 0.3);
        }

        #generateBtn {
            height: 55px;
            padding: 0 30px;
            border: none;
            border-radius: 28px;
            background: linear-gradient(90deg, #d63384, #ff69b4);
            color: #ffffff;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(214, 51, 132, 0.2);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        #generateBtn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(214, 51, 132, 0.3);
        }

        #generateBtn:active {
            transform: translateY(0);
        }

        /* 3D舞台 - 透视效果 */
        .stage {
            perspective: 1200px;
            position: relative;
            margin-top: 50px;
        }

        /* 文字3D旋转核心 - 单层文字 */
        .text-rotate {
            font-size: 100px;
            font-weight: 900;
            color: #d63384;
            text-shadow: 0 0 10px rgba(214, 51, 132, 0.3), 0 0 20px rgba(214, 51, 132, 0.1);
            transform-style: preserve-3d;
            animation: text3DRotate 8s linear infinite;
            position: relative;
            z-index: 2;
            white-space: nowrap;
        }

        /* 文字3D旋转动画 */
        @keyframes text3DRotate {
            0% { transform: rotateY(0deg) rotateX(0deg); }
            50% { transform: rotateY(180deg) rotateX(5deg); }
            100% { transform: rotateY(360deg) rotateX(0deg); }
        }

        /* 粒子容器 - 紧贴文字 */
        .particle-container {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 1;
            pointer-events: none;
        }

        /* 爱心粒子基础样式 - 爱情主题配色 */
        .heart-particle {
            position: absolute;
            width: 8px;
            height: 8px;
            background-color: #ff69b4;
            transform: rotate(45deg);
            box-shadow: 0 0 8px #ff69b4;
            opacity: 0.9;
            border-radius: 2px;
            /* 粒子跳跃+旋转核心动画 */
            animation: particleJump 2s ease-in-out infinite, particleRotate 3s linear infinite;
        }

        .heart-particle::before,
        .heart-particle::after {
            content: "";
            position: absolute;
            width: 8px;
            height: 8px;
            background-color: #ff69b4;
            border-radius: 50%;
            box-shadow: 0 0 8px #ff69b4;
        }

        .heart-particle::before { top: -4px; left: 0; }
        .heart-particle::after { top: 0; left: -4px; }

        /* 极小粒子点缀 */
        .heart-particle.tiny {
            width: 5px;
            height: 5px;
            animation-duration: 1.5s, 2.5s;
        }
        .heart-particle.tiny::before,
        .heart-particle.tiny::after {
            width: 5px;
            height: 5px;
        }
        .heart-particle.tiny::before { top: -2.5px; }
        .heart-particle.tiny::after { left: -2.5px; }

        /* 粒子跳跃动画 - 紧贴文字上下跳 */
        @keyframes particleJump {
            0%, 100% { transform: rotate(45deg) translateY(0px) scale(1); }
            50% { transform: rotate(45deg) translateY(-15px) scale(1.3); opacity: 1; }
        }

        /* 粒子自身旋转动画 */
        @keyframes particleRotate {
            0% { transform: rotate(45deg) rotateZ(0deg); }
            100% { transform: rotate(45deg) rotateZ(360deg); }
        }

        /* 粒子反向旋转 */
        .heart-particle.reverse {
            animation: particleJump 2s ease-in-out infinite, particleRotate 3s linear infinite reverse;
        }

        .tip-text {
            position: absolute;
            bottom: 50px;
            color: #d63384;
            opacity: 0.7;
            font-size: 16px;
            text-align: center;
        }
    </style>
</head>
<body id="appBody">
    <div class="input-group">
        <input type="text" id="textInput" placeholder="请输入文字（如：少羽牛逼）" maxlength="8">
        <button id="generateBtn">生成特效 ❤️</button>
    </div>

    <div class="stage">
        <div class="text-rotate" id="displayText">鸡公煲制作</div>
        <div class="particle-container" id="particleContainer"></div>
    </div>

    <div class="tip-text">114514</div>

    <script>
        // DOM元素获取
        const appBody = document.getElementById('appBody');
        const textInput = document.getElementById('textInput');
        const generateBtn = document.getElementById('generateBtn');
        const displayText = document.getElementById('displayText');
        const particleContainer = document.getElementById('particleContainer');

        // 爱情主题背景预设色（粉紫、粉蓝、粉橙渐变，凸显爱情氛围）
        const loveBgPresets = [
            "linear-gradient(135deg, #ffccd5, #f7c8e0, #d4b5ff)",
            "linear-gradient(135deg, #ffe5ec, #ffc2d1, #ff8fab)",
            "linear-gradient(135deg, #fff0f5, #fde2e4, #fad2e1)",
            "linear-gradient(135deg, #ffebf0, #ffd6e0, #ffc2f0)"
        ];

        // 爱情主题粒子颜色预设（粉系渐变）
        const loveParticleColors = [
            "#ff69b4", "#d63384", "#ff8fab", "#ffc2d1", "#fad2e1"
        ];

        // 基于文字生成随机参数（确保同一文字效果一致）
        function getRandomParamsByText(text) {
            let seed = 1;
            for (let i = 0; i < text.length; i++) {
                seed = (seed * text.charCodeAt(i)) % 999999;
            }
            const random = (min, max) => {
                seed = (seed * 9301 + 49297) % 233280;
                return Math.floor(min + (seed / 233280) * (max - min));
            };

            return {
                rotateDuration: random(6, 10),  // 文字旋转时长
                particleCount: random(15, 30),  // 粒子数量减少，避免密集
                jumpDuration: random(15, 25)/10,// 跳跃时长 1.5-2.5s
                rotateDuration: random(25, 40)/10,// 旋转时长 2.5-4s
                bgIndex: random(0, loveBgPresets.length - 1), // 随机背景索引
                colorIndex: random(0, loveParticleColors.length - 1) // 随机粒子颜色索引
            };
        }

        // 清除现有粒子
        function clearParticles() {
            particleContainer.innerHTML = '';
        }

        // 生成紧贴文字的爱心粒子（跳跃+旋转）
        function createHeartParticles(params) {
            clearParticles();
            const { particleCount, jumpDuration, rotateDuration, colorIndex } = params;
            const textRect = displayText.getBoundingClientRect();
            const particleColor = loveParticleColors[colorIndex];

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'heart-particle';
                
                // 随机极小粒子
                if (Math.random() < 0.4) particle.classList.add('tiny');
                // 随机反向旋转
                if (Math.random() < 0.5) particle.classList.add('reverse');

                // 粒子位置：紧贴文字范围内随机分布
                const randomX = Math.random() * textRect.width - textRect.width/2;
                const randomY = Math.random() * textRect.height - textRect.height/2;
                particle.style.left = `calc(50% + ${randomX}px)`;
                particle.style.top = `calc(50% + ${randomY}px)`;

                // 设置粒子颜色
                particle.style.backgroundColor = particleColor;
                particle.style.boxShadow = `0 0 8px ${particleColor}`;
                // 设置伪元素颜色
                const style = document.createElement('style');
                style.textContent = `
                    #particleContainer .heart-particle:nth-child(${i+1})::before,
                    #particleContainer .heart-particle:nth-child(${i+1})::after {
                        background-color: ${particleColor};
                        box-shadow: 0 0 8px ${particleColor};
                    }
                `;
                document.head.appendChild(style);

                // 随机动画延迟，避免同步
                const delay = Math.random() * jumpDuration;
                particle.style.animationDuration = `${jumpDuration}s, ${rotateDuration}s`;
                particle.style.animationDelay = `${delay}s, ${delay}s`;

                particleContainer.appendChild(particle);
            }

            // 少量动态新增粒子，保持鲜活
            let particleTimer = setInterval(() => {
                if (particleContainer.children.length > particleCount + 10) {
                    clearInterval(particleTimer);
                    return;
                }
                const particle = document.createElement('div');
                particle.className = 'heart-particle tiny';
                if (Math.random() < 0.5) particle.classList.add('reverse');

                const randomX = Math.random() * textRect.width - textRect.width/2;
                const randomY = Math.random() * textRect.height - textRect.height/2;
                particle.style.left = `calc(50% + ${randomX}px)`;
                particle.style.top = `calc(50% + ${randomY}px)`;

                particle.style.backgroundColor = particleColor;
                particle.style.boxShadow = `0 0 8px ${particleColor}`;
                particle.style.animationDuration = `${jumpDuration}s, ${rotateDuration}s`;
                particle.style.animationDelay = `${Math.random() * jumpDuration}s`;

                particleContainer.appendChild(particle);
            }, 800);
        }

        // 生成文字和粒子特效
        function generateTextEffect(text) {
            if (!text.trim()) {
                alert('请输入有效文字！');
                return;
            }
            // 更新显示文字
            displayText.textContent = text;
            // 获取随机参数
            const params = getRandomParamsByText(text);
            // 随机切换爱情主题背景
            appBody.style.background = loveBgPresets[params.bgIndex];
            // 设置文字旋转速度
            displayText.style.animation = `text3DRotate ${params.rotateDuration}s linear infinite`;
            // 生成粒子
            createHeartParticles(params);
        }

        // 事件绑定
        generateBtn.addEventListener('click', () => {
            generateTextEffect(textInput.value.trim());
        });
        textInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                generateTextEffect(textInput.value.trim());
            }
        });

        // 初始化默认特效
        generateTextEffect(displayText.textContent);
    </script>
</body>
</html>
